{% extends "base.html" %}
{% from "components/course_cell.html" import course_cell %}
{% from "components/directory_cell.html" import directory_cell %}
{% from "components/breadcrumb.html" import breadcrumb_nav %}

{% block title %}{{ directory_title }} - Learn Sphere{% endblock %}

{% block content %}
<div class="ls-home-container">
    <!-- Main content -->
    <main class="ls-home-content">
        {{ breadcrumb_nav(breadcrumbs) }}

        <!-- Title -->
        <h1 class="ls-home-title">{{ directory_title }}</h1>

        {% set directories = courses|selectattr('node_type.value', 'equalto', 'directory')|list %}
        {% set actual_courses = courses|rejectattr('node_type.value', 'equalto', 'directory')|list %}

        <!-- Directories Section -->
        {% if directories %}
            <div class="ls-directories-section">
                <h2 class="ls-section-title">Directories</h2>
                <div class="ls-directories-list">
                    {% for directory in directories %}
                        {{ directory_cell(directory) }}
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        <!-- Courses Section -->
        {% if actual_courses %}
            <div class="ls-courses-section">
                <h2 class="ls-section-title">Courses</h2>
                <div class="ls-home-grid">
                    {% for course in actual_courses %}
                        {{ course_cell(course) }}
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        <!-- Empty state -->
        {% if not courses %}
            <div class="ls-home-empty">
                <div class="ls-home-empty-title">Empty Directory</div>
                <div class="ls-home-empty-message">
                    This directory doesn't contain any courses or subdirectories.
                </div>
            </div>
        {% endif %}
    </main>
</div>
{% endblock %}